CREATE TABLE recipes (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL UNIQUE
);

CREATE TABLE ingredients (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL UNIQUE
);

CREATE TABLE recipe_ingredients (
  recipe_id INTEGER NOT NULL,
  ingredient_id INTEGER NOT NULL,
  PRIMARY KEY (recipe_id, ingredient_id)
);

CREATE TABLE recipe_components (
  parent_recipe_id INTEGER NOT NULL,
  child_recipe_id INTEGER NOT NULL,
  PRIMARY KEY (parent_recipe_id, child_recipe_id),
  CHECK (parent_recipe_id != child_recipe_id)
);
